# **SPECTRE: Process, Explore and Capture Transient Radio Emissions**

## Overview

ðŸ“¢ **This project is under active development. Contributors welcome!** ðŸ“¢

`spectre` is a receiver-agnostic program for recording and visualising radio spectrograms. Powered by [GNU Radio](https://www.gnuradio.org/).

### **Features**
- ðŸ’» Intuitive CLI tool  
- ðŸ³ Simple installation with Docker
- ðŸ›°ï¸ Wide receiver support  
- ðŸ’¾ Live recording of radio spectrograms and I/Q data  
- âš™ï¸ Flexible, configurable data capture   
- ðŸ”§ Developer-friendly and extensible



## Solar Radio Observations â˜€ï¸
As a glimpse of what `spectre` can do, here are some recorded radio observations of the huge X9.0 solar flare which occurred on October 3rd 2024. The figure below compares a `spectre` spectrogram (second panel) captured in the West End of Glasgow, to that observed by a [CALLISTO](https://e-callisto.org/) spectrometer stationed in Egypt, Alexandria (top panel).

![Solar flare observations comparison](docs/gallery/comparison.png)


## Supported Receivers

Initial support is focused on the SDRplay RSP* series via [`gr-sdrplay3`](https://github.com/fventuri/gr-sdrplay3). A wide range of receiver support is planned.

### **Current Supported Receivers**
- [RSP1A (from SDRPlay)](https://www.sdrplay.com/rsp1a/)  
- [RSPduo (from SDRPlay)](https://www.sdrplay.com/rspduo/)  

### **Planned Future Support**
The framework is in place to integrate the following receivers:
- RSP1, RSP1B, RSP2, RSPdx (via [`gr-sdrplay3`](https://github.com/fventuri/gr-sdrplay3))  
- USRP SDRs (e.g., the [b200-mini](https://www.ettus.com/all-products/usrp-b200mini/))  
- RTLSDR, AirspyHF, BladeRF, HackRF, LimeSDR, PLUTO (via [`Soapy`](https://wiki.gnuradio.org/index.php/Soapy))  

**âš ï¸ Note:**  
SDRPlay clones (i.e., unofficially produced copies of SDRPlay receivers) will likely not work with spectre as they are not compatible with the official SDRPlay API.  


## Supported Platforms
`spectre` is expected to be compatible with most Linux distributions.

The following operating systems and architectures have been verified:   
- **ThinkPad P1G5** running:
  - Ubuntu 22.04.3  
- **Raspberry Pi 4 Model B** running:
  - Ubuntu Desktop  
  - Raspberry Pi OS  
  - Raspberry Pi OS Lite  

macOS compatibility will be explored in the future.


## Quick Start

### **Prerequisites**
To get going, you'll need the following installed on your machine:  
| Prerequisite      | How to Install | Do I Already Have It? |
|------------------|---------------|-----------------------|
| **Docker Engine** | [Install Docker Engine](https://docs.docker.com/engine/install/) | Run docker --version |
| **Git**          | [Getting Started - Installing Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git) | Run git --version |



### **Initial setup**
1. Clone the spectre GitHub repository and navigate to its root directory:    
   ```bash
   git clone https://github.com/jcfitzpatrick12/spectre.git && \
   cd spectre
   ```


2. Set the `SPECTRE_DATA_DIR_PATH` environment variable, which specifies which directory to store data files generated by the program:  
   ```bash
   export SPECTRE_DATA_DIR_PATH="$(pwd)/.spectre-data" && \
   echo "export SPECTRE_DATA_DIR_PATH=\"$SPECTRE_DATA_DIR_PATH\"" >> ~/.bashrc
   ```


### **Starting the spectre-server**
The `spectre-server` container must be running to respond to `spectre-cli` requests. The following commands assume your present working directory is the root of this repository (wherever you cloned it on your system).

1. Build the image (this can take a bit of time):    
   ```bash
   docker build --tag spectre-server backend --target runtime
   ```


2. Run the `spectre-server` container:  
   ```bash
   docker run --rm \
              --name spectre-server \
              --publish 127.0.0.1:5000:5000 \
              --volume $SPECTRE_DATA_DIR_PATH:/app/.spectre-data \
              --volume /dev/shm:/dev/shm \
              --device /dev/bus/usb:/dev/bus/usb \
              --detach \
              spectre-server
   ```

 
3. You can check the `spectre-server` is running by using:  
   ```bash
   docker container list
   ```


4. At any time, you can kill the ``spectre-server`` using:    
   ```bash
   docker kill spectre-server
   ```

All data stored in the directory specified by the `SPECTRE_DATA_DIR_PATH` environment variable will persist beyond the lifecycle of the `spectre-server` container. You can refer to [Docker's official documentation](https://docs.docker.com/engine/storage/) to learn more about persistent storage in containers.

### **Running the spectre-cli**
Run these steps after setting up and starting the `spectre-server`. The following commands assume your present working directory is the root of this repository (wherever you cloned it on your system).

1. Create then activate a Python virtual environment: 
   ```bash
   python3 -m venv ./.venv && \
   . ./.venv/bin/activate
   ```


2. Install the required dependencies:  
   ```bash
   pip install .
   ```


3. Verify the CLI is operational:  
   ```bash
   spectre --help
   ```

Notably, the CLI commands will only work when the virtual environment is activated.


## **Quick Start for Developers**
1. Use the development stage as a target to build the development image:    
   ```bash
   docker build --tag spectre-dev-server backend --target development
   ```

2. Run the `spectre-dev-server` container:  
   ```bash
   docker run --rm \
              --name spectre-dev-server \
              --publish 127.0.0.1:5000:5000 \
              --volume $SPECTRE_DATA_DIR_PATH:/app/.spectre-data \
              --volume /dev/shm:/dev/shm \
              --device /dev/bus/usb:/dev/bus/usb \
              --interactive \
              --tty \
              --env DISPLAY=$DISPLAY \
              --volume /tmp/.X11-unix:/tmp/.X11-unix \
              spectre-dev-server \
              /bin/bash
   ```

You can then use [dev-containers](https://code.visualstudio.com/docs/devcontainers/containers) to work on the latest versions of `spectre-core` and `spectre`. If you are using SDRPlay devices, you will need to manually start the API in the background. From inside the container:  

```bash
/opt/sdrplay_api/sdrplay_apiService &
```

## Contributing
This repository is in active development. If you are interested, feel free to contact  jcfitzpatrick12@gmail.com :)